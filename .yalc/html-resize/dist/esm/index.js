var extendStatics=function(e,t){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t;}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);},extendStatics(e,t)};function __extends(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e;}extendStatics(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r);}var __assign=function(){return __assign=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},__assign.apply(this,arguments)};"function"==typeof SuppressedError?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};

var ItemMenu;!function(e){e.DELETE="DELETE",e.DUPLICATE="DUPLICATE",e.SEND_TOP="SEND_TOP",e.SEND_ALL_TOP="SEND_ALL_TOP",e.SEND_BOTTOM="SEND_BOTTOM",e.SEND_ALL_BOTTOM="SEND_ALL_BOTTOM";}(ItemMenu||(ItemMenu={}));var ContextMenu=function(){function e(){this.itensMenu=[{id:"delete",label:"Remover",action:ItemMenu.DELETE},{id:"duplicate",label:"Duplicar",action:ItemMenu.DUPLICATE},{id:"level-top",label:"Para frente",action:ItemMenu.SEND_TOP},{id:"level-all-top",label:"Trazer à frente",action:ItemMenu.SEND_ALL_TOP},{id:"level-bottom",label:"Mover para trás",action:ItemMenu.SEND_BOTTOM},{id:"level-all-bottom",label:"Enviar para trás",action:ItemMenu.SEND_ALL_BOTTOM}],this.onClickItemMenu=function(e){},this.elementContextMenu=document.createElement("div"),this.elementContextMenuWrapper=document.createElement("div"),this.buildElement(),this.attachItensMenu(),this.initEvents();}return e.prototype.buildElement=function(){this.elementContextMenu.className="context-menu",this.elementContextMenuWrapper.className="context-menu-wrapper",document.body.appendChild(this.elementContextMenu),this.elementContextMenu.appendChild(this.elementContextMenuWrapper);},e.prototype.attachItensMenu=function(){for(var e=this,t=function(t){var i=document.createElement("button");i.textContent=t.label,i.id=t.id,i.addEventListener("click",(function(){e.onClickItemMenu(t.action);}),!1),n.elementContextMenuWrapper.appendChild(i);},n=this,i=0,o=this.itensMenu;i<o.length;i++){t(o[i]);}},e.prototype.initEvents=function(){var e=this;this.elementContextMenu.addEventListener("click",(function(){e.hide();}),!1);},e.prototype.show=function(e,t){this.elementContextMenuWrapper.style.top="".concat(e,"px"),this.elementContextMenuWrapper.style.left="".concat(t,"px"),this.elementContextMenu.classList.add("show");},e.prototype.hide=function(){this.elementContextMenu.classList.remove("show");},e.prototype.enableAllItemMenu=function(){this.elementContextMenuWrapper.querySelectorAll("button").forEach((function(e){return e.removeAttribute("disabled")}));},e.prototype.disableItemMenu=function(e){var t,n=this.itensMenu.find((function(t){return t.action===e}));n&&(null===(t=this.elementContextMenuWrapper.querySelector("#".concat(n.id)))||void 0===t||t.setAttribute("disabled",""));},e}();

var ManipuleElementsEventEnum;!function(n){n.RESIZING="resizing",n.START_RESIZE="start-resizing",n.STOP_RESIZING="stop-resizing";}(ManipuleElementsEventEnum||(ManipuleElementsEventEnum={}));var ManipuleElementsEvents=function(){function n(){}return n.createNew=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];var a=new CustomEvent("".concat(n.PREFFIX).concat(e),{detail:__assign({},t)});window.dispatchEvent(a);},n.listen=function(e,t){window.addEventListener("".concat(n.PREFFIX).concat(e),(function(n){t(n.detail);}));},n.PREFFIX="manipule-elements:",n}();

var ResizePointTypeEnum;!function(e){e.TOP_LEFT="tl",e.TOP_RIGHT="tr",e.BOTTOM_LEFT="bl",e.BOTTOM_RIGHT="br",e.MIDDLE_RIGHT="mr",e.MIDDLE_LEFT="ml",e.MIDDLE_TOP="mt",e.MIDDLE_BOTTOM="mb";}(ResizePointTypeEnum||(ResizePointTypeEnum={}));var ResizePointTypeEventEnum;!function(e){e.RESIZING="resizing",e.START_RESIZE="start-resizing",e.STOP_RESIZING="stop-resizing";}(ResizePointTypeEventEnum||(ResizePointTypeEventEnum={}));var ResizePoint=function(){function e(e){if(this.onEvents={},!Object.values(ResizePointTypeEnum).includes(e))throw new Error("ResizePoint type not recognized");this.el=document.createElement("div"),this.el.classList.add("res-point",e),this.el.addEventListener("mousedown",this.initResize.bind(this),!1),this.type=e;}return e.prototype.on=function(e,n){Object.values(ResizePointTypeEventEnum).includes(e)&&(this.onEvents[e]=n);},e.prototype.send=function(e){for(var n,t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];ManipuleElementsEvents.createNew(e,t),Object.values(ResizePointTypeEventEnum).includes(e)&&(n=this.onEvents)[e].apply(n,t);},e.prototype.getElement=function(){return this.el},e.prototype.getType=function(){return this.type},e.prototype.initResize=function(e){var n=this;if(e.target){this.send(ResizePointTypeEventEnum.START_RESIZE);var t=function(e){n.send(ResizePointTypeEventEnum.RESIZING,e);},i=function(){n.send(ResizePointTypeEventEnum.STOP_RESIZING),window.removeEventListener("mousemove",t,!1),window.removeEventListener("mouseup",i,!1);};window.addEventListener("mousemove",t,!1),window.addEventListener("mouseup",i,!1);}},e}();

var ResizableShadow=function(){function e(e){this.resizeType=e,this.onStartResize=function(){},this.onStopResize=function(){},this.onResizing=function(){};var n=document.createElement("div");n.classList.add("shadow"),this.shadowElement=n;}return e.prototype.getElement=function(){return this.shadowElement},e.prototype.start=function(){var e=this;this.shadowElement.style.display="initial";var n=new ResizePoint(ResizePointTypeEnum.TOP_LEFT);n.on(ResizePointTypeEventEnum.RESIZING,(function(n){e.onResizing(n,ResizePointTypeEnum.TOP_LEFT);})),n.on(ResizePointTypeEventEnum.START_RESIZE,(function(){e.onStartResize();})),n.on(ResizePointTypeEventEnum.STOP_RESIZING,(function(){e.onStopResize();}));var t=new ResizePoint(ResizePointTypeEnum.TOP_RIGHT);t.on(ResizePointTypeEventEnum.RESIZING,(function(n){e.onResizing(n,ResizePointTypeEnum.TOP_RIGHT);})),t.on(ResizePointTypeEventEnum.START_RESIZE,(function(){e.onStartResize();})),t.on(ResizePointTypeEventEnum.STOP_RESIZING,(function(){e.onStopResize();}));var i=new ResizePoint(ResizePointTypeEnum.BOTTOM_LEFT);i.on(ResizePointTypeEventEnum.RESIZING,(function(n){e.onResizing(n,ResizePointTypeEnum.BOTTOM_LEFT);})),i.on(ResizePointTypeEventEnum.START_RESIZE,(function(){e.onStartResize();})),i.on(ResizePointTypeEventEnum.STOP_RESIZING,(function(){e.onStopResize();}));var o=new ResizePoint(ResizePointTypeEnum.BOTTOM_RIGHT);if(o.on(ResizePointTypeEventEnum.RESIZING,(function(n){e.onResizing(n,ResizePointTypeEnum.BOTTOM_RIGHT);})),o.on(ResizePointTypeEventEnum.START_RESIZE,(function(){e.onStartResize();})),o.on(ResizePointTypeEventEnum.STOP_RESIZING,(function(){e.onStopResize();})),this.resPoints={topLeft:n,topRight:t,bottomLeft:i,bottomRight:o},this.shadowElement.appendChild(n.getElement()),this.shadowElement.appendChild(t.getElement()),this.shadowElement.appendChild(i.getElement()),this.shadowElement.appendChild(o.getElement()),[ResizableType.RESIZABLE_TYPE_TEXT,ResizableType.RESIZABLE_TYPE_IMAGE].includes(this.resizeType)){var s=new ResizePoint(ResizePointTypeEnum.MIDDLE_RIGHT);s.on(ResizePointTypeEventEnum.RESIZING,(function(n){e.onResizing(n,ResizePointTypeEnum.MIDDLE_RIGHT);})),s.on(ResizePointTypeEventEnum.START_RESIZE,(function(){e.onStartResize();})),s.on(ResizePointTypeEventEnum.STOP_RESIZING,(function(){e.onStopResize();}));var E=new ResizePoint(ResizePointTypeEnum.MIDDLE_LEFT);E.on(ResizePointTypeEventEnum.RESIZING,(function(n){e.onResizing(n,ResizePointTypeEnum.MIDDLE_LEFT);})),E.on(ResizePointTypeEventEnum.START_RESIZE,(function(){e.onStartResize();})),E.on(ResizePointTypeEventEnum.STOP_RESIZING,(function(){e.onStopResize();})),this.resPoints.middleLeft=E,this.resPoints.middleRight=s,this.shadowElement.appendChild(E.getElement()),this.shadowElement.appendChild(s.getElement());}if(this.resizeType===ResizableType.RESIZABLE_TYPE_IMAGE){var R=new ResizePoint(ResizePointTypeEnum.MIDDLE_TOP);R.on(ResizePointTypeEventEnum.RESIZING,(function(n){e.onResizing(n,ResizePointTypeEnum.MIDDLE_TOP);})),R.on(ResizePointTypeEventEnum.START_RESIZE,(function(){e.onStartResize();})),R.on(ResizePointTypeEventEnum.STOP_RESIZING,(function(){e.onStopResize();}));var T=new ResizePoint(ResizePointTypeEnum.MIDDLE_BOTTOM);T.on(ResizePointTypeEventEnum.RESIZING,(function(n){e.onResizing(n,ResizePointTypeEnum.MIDDLE_BOTTOM);})),T.on(ResizePointTypeEventEnum.START_RESIZE,(function(){e.onStartResize();})),T.on(ResizePointTypeEventEnum.STOP_RESIZING,(function(){e.onStopResize();})),this.resPoints.middleBottom=T,this.resPoints.middleTop=R,this.shadowElement.appendChild(R.getElement()),this.shadowElement.appendChild(T.getElement());}},e.prototype.finish=function(){var e,n,t,i;this.resPoints&&(this.resPoints.topLeft.getElement().remove(),this.resPoints.topRight.getElement().remove(),this.resPoints.bottomLeft.getElement().remove(),this.resPoints.bottomRight.getElement().remove(),null===(e=this.resPoints.middleLeft)||void 0===e||e.getElement().remove(),null===(n=this.resPoints.middleRight)||void 0===n||n.getElement().remove(),null===(t=this.resPoints.middleBottom)||void 0===t||t.getElement().remove(),null===(i=this.resPoints.middleTop)||void 0===i||i.getElement().remove());},e}();

var ResizableType;!function(e){e.RESIZABLE_TYPE_TEXT="text",e.RESIZABLE_TYPE_IMAGE="image",e.RESIZABLE_TYPE_VIDEO="video",e.RESIZABLE_TYPE_SVG="svg";}(ResizableType||(ResizableType={}));var Resizable=function(){function e(e){var t=e.contentEl,i=e.type,s=e.wrapperLeft;this.wrapperLeft=0,this.onStartResize=function(){},this.onStopResize=function(){},t.parentElement&&t.parentElement.classList.contains("content-wrapper")?(t.parentElement.classList.add(i,"resizable"),this.resizableElement=t.parentElement):this.resizableElement=t,this.type=i,this.shadowElement=null,this.wrapperLeft=s,this.initEvents();}return e.prototype.initEvents=function(){var e=this;this.resizableElement.addEventListener("click",this.handleClick.bind(this),!0),this.shadowElement=new ResizableShadow(this.type),this.shadowElement.onStartResize=function(){e.onStartResize();},this.shadowElement.onStopResize=function(){e.onStopResize();},this.shadowElement.onResizing=function(t,i){var s=t.clientX,n=t.clientY;e.doResize(s,n,i);},this.resizableElement.appendChild(this.shadowElement.getElement());},e.prototype.handleClick=function(){if(this.resizableElement.classList.add("selected"),!this.shadowElement||this.resizableElement.classList.contains("is-dragging"))return !1;this.shadowElement.start();},e.prototype.removeSelection=function(){this.resizableElement.classList.remove("selected"),this.shadowElement&&this.shadowElement.finish();},e.prototype.getElement=function(){return this.resizableElement},e}();

var Drag=function(){function t(t,e,s){this.contentEl=t,this.wrapperBounds=e,this.wrapperElement=s,this.pos1=0,this.pos2=0,this.pos3=0,this.pos4=0,this.classesAllowedToDrag=["shadow","content"],this.boundStartDragEventHandler=this.startDrag.bind(this),this.initEvents();}return t.prototype.initEvents=function(){this.contentEl.addEventListener("mousedown",this.initDrag.bind(this),!1);},t.prototype.initDrag=function(t){var e=this;if(this.isElementCanBeDragged(t.target)){this.pos3=t.clientX,this.pos4=t.clientY,this.contentEl.classList.add("is-dragging");var s=function(){e.contentEl.classList.remove("is-dragging"),e.wrapperElement.removeEventListener("mouseup",s,!1),e.wrapperElement.removeEventListener("mousemove",e.boundStartDragEventHandler,!1),e.wrapperElement.removeEventListener("mouseleave",s,!1);};this.wrapperElement.addEventListener("mouseup",s,!1),this.wrapperElement.addEventListener("mousemove",this.boundStartDragEventHandler,!1),this.wrapperElement.addEventListener("mouseleave",s,!1);}},t.prototype.startDrag=function(t){this.pos1=this.pos3-t.clientX,this.pos2=this.pos4-t.clientY,this.pos3=t.clientX,this.pos4=t.clientY;var e=this.contentEl.offsetTop-this.pos2,s=this.contentEl.offsetLeft-this.pos1;s+this.wrapperBounds.x>this.wrapperBounds.x&&s+this.contentEl.clientWidth<this.wrapperBounds.w&&(this.contentEl.style.left="".concat(s,"px")),e+this.wrapperBounds.y>this.wrapperBounds.y&&e+this.contentEl.clientHeight<this.wrapperBounds.h&&(this.contentEl.style.top="".concat(e,"px"));},t.prototype.isElementCanBeDragged=function(t){var e;return !t.classList.contains("is-editing")&&!(null===(e=t.parentElement)||void 0===e?void 0:e.classList.contains("is-editing"))&&this.classesAllowedToDrag.filter((function(e){return t.classList.contains(e)})).length>0},t}();

var ResizableText=function(e){function t(t){var i=t.contentEl,n=t.wrapperLeft;return i.classList.add("content"),e.call(this,{contentEl:i,wrapperLeft:n,type:ResizableType.RESIZABLE_TYPE_TEXT})||this}return __extends(t,e),t.prototype.doResize=function(e,t,i){var n=this.resizableElement.getBoundingClientRect(),s=n.left,l=n.width,o=n.height,r=this.calculateToGrowSize(i,e,s,l);if(!(r<1&&o<20)){if(this.resizableElement.style.width=l+r+"px",[ResizePointTypeEnum.MIDDLE_LEFT,ResizePointTypeEnum.TOP_LEFT,ResizePointTypeEnum.BOTTOM_LEFT].includes(i)&&(this.resizableElement.style.left=s-this.wrapperLeft-r+"px"),i===ResizePointTypeEnum.TOP_RIGHT||i===ResizePointTypeEnum.TOP_LEFT){var p=parseFloat(window.getComputedStyle(this.resizableElement,null).getPropertyValue("top"))-r/8+"px";this.resizableElement.style.top=p;}if(![ResizePointTypeEnum.MIDDLE_LEFT,ResizePointTypeEnum.MIDDLE_RIGHT].includes(i)){var T=parseFloat(window.getComputedStyle(this.resizableElement,null).getPropertyValue("font-size"));this.resizableElement.style.fontSize=T+r/8+"px";}}},t.prototype.calculateToGrowSize=function(e,t,i,n){return [ResizePointTypeEnum.MIDDLE_LEFT,ResizePointTypeEnum.TOP_LEFT,ResizePointTypeEnum.BOTTOM_LEFT].includes(e)?i-t:t-(i+n)},t}(Resizable);

var ResizableImage=function(e){function t(t){var i=t.contentEl,n=t.wrapperLeft,o=this;return i.classList.add("content"),(o=e.call(this,{contentEl:i,wrapperLeft:n,type:ResizableType.RESIZABLE_TYPE_IMAGE})||this).imageElement=i,o}return __extends(t,e),t.prototype.doResize=function(e,t,i){var n=this.resizableElement.getBoundingClientRect(),o=n.left,s=n.top,l=this.imageElement.getBoundingClientRect(),r=l.width,p=l.height,E=this.calculateToGrowSize(i,e,t,o,r,p,s);if(!(E<1&&p<20)){if(!this.isMiddlePoint(i)){var T=p/r;this.imageElement.style.height=p+T*E+"px";}if(this.isMiddleVerticalPoint(i)?this.imageElement.style.height=p+E+"px":(this.isMiddleHorizontalPoint(i),this.imageElement.style.width=r+E+"px"),[ResizePointTypeEnum.MIDDLE_LEFT,ResizePointTypeEnum.TOP_LEFT,ResizePointTypeEnum.BOTTOM_LEFT].includes(i)&&(this.resizableElement.style.left=o-this.wrapperLeft-E+"px"),i===ResizePointTypeEnum.TOP_RIGHT||i===ResizePointTypeEnum.TOP_LEFT||i===ResizePointTypeEnum.MIDDLE_TOP){var a=parseFloat(window.getComputedStyle(this.resizableElement,null).getPropertyValue("top"))-E+"px";this.resizableElement.style.top=a;}}},t.prototype.calculateToGrowSize=function(e,t,i,n,o,s,l){return e===ResizePointTypeEnum.MIDDLE_TOP?l-i:e===ResizePointTypeEnum.MIDDLE_BOTTOM?i-(l+s):[ResizePointTypeEnum.MIDDLE_LEFT,ResizePointTypeEnum.TOP_LEFT,ResizePointTypeEnum.BOTTOM_LEFT].includes(e)?n-t:t-(n+o)},t.prototype.isMiddleHorizontalPoint=function(e){return e===ResizePointTypeEnum.MIDDLE_LEFT||e===ResizePointTypeEnum.MIDDLE_RIGHT},t.prototype.isMiddleVerticalPoint=function(e){return e===ResizePointTypeEnum.MIDDLE_TOP||e===ResizePointTypeEnum.MIDDLE_BOTTOM},t.prototype.isMiddlePoint=function(e){return this.isMiddleHorizontalPoint(e)||this.isMiddleVerticalPoint(e)},t}(Resizable);

var ResizableVideo=function(e){function i(i){var t=i.contentEl,n=i.wrapperLeft,o=this;return t.classList.add("content"),(o=e.call(this,{contentEl:t,wrapperLeft:n,type:ResizableType.RESIZABLE_TYPE_VIDEO})||this).imageElement=t,o}return __extends(i,e),i.prototype.doResize=function(e,i,t){var n=this.resizableElement.getBoundingClientRect(),o=n.left,s=n.top,l=this.imageElement.getBoundingClientRect(),r=l.width,p=l.height,E=this.calculateToGrowSize(t,e,i,o,r,p,s);if(!(E<1&&p<20)){if(!this.isMiddlePoint(t)){var T=p/r;this.imageElement.style.height=p+T*E+"px";}if(this.isMiddleVerticalPoint(t)?this.imageElement.style.height=p+E+"px":(this.isMiddleHorizontalPoint(t),this.imageElement.style.width=r+E+"px"),[ResizePointTypeEnum.MIDDLE_LEFT,ResizePointTypeEnum.TOP_LEFT,ResizePointTypeEnum.BOTTOM_LEFT].includes(t)&&(this.resizableElement.style.left=o-this.wrapperLeft-E+"px"),t===ResizePointTypeEnum.TOP_RIGHT||t===ResizePointTypeEnum.TOP_LEFT||t===ResizePointTypeEnum.MIDDLE_TOP){var a=parseFloat(window.getComputedStyle(this.resizableElement,null).getPropertyValue("top"))-E+"px";this.resizableElement.style.top=a;}}},i.prototype.calculateToGrowSize=function(e,i,t,n,o,s,l){return e===ResizePointTypeEnum.MIDDLE_TOP?l-t:e===ResizePointTypeEnum.MIDDLE_BOTTOM?t-(l+s):[ResizePointTypeEnum.MIDDLE_LEFT,ResizePointTypeEnum.TOP_LEFT,ResizePointTypeEnum.BOTTOM_LEFT].includes(e)?n-i:i-(n+o)},i.prototype.isMiddleHorizontalPoint=function(e){return e===ResizePointTypeEnum.MIDDLE_LEFT||e===ResizePointTypeEnum.MIDDLE_RIGHT},i.prototype.isMiddleVerticalPoint=function(e){return e===ResizePointTypeEnum.MIDDLE_TOP||e===ResizePointTypeEnum.MIDDLE_BOTTOM},i.prototype.isMiddlePoint=function(e){return this.isMiddleHorizontalPoint(e)||this.isMiddleVerticalPoint(e)},i}(Resizable);

var ResizableSvg=function(e){function t(t){var i=t.contentEl,n=t.wrapperLeft,o=this;return i.classList.add("content"),(o=e.call(this,{contentEl:i,wrapperLeft:n,type:ResizableType.RESIZABLE_TYPE_SVG})||this).imageElement=i,o}return __extends(t,e),t.prototype.doResize=function(e,t,i){var n=this.resizableElement.getBoundingClientRect(),o=n.left,s=n.top,l=this.imageElement.getBoundingClientRect(),r=l.width,p=l.height,E=this.calculateToGrowSize(i,e,t,o,r,p,s);if(!(E<1&&p<20)){if(!this.isMiddlePoint(i)){var T=p/r;this.imageElement.style.height=p+T*E+"px";}if(this.isMiddleVerticalPoint(i)?this.imageElement.style.height=p+E+"px":(this.isMiddleHorizontalPoint(i),this.imageElement.style.width=r+E+"px"),[ResizePointTypeEnum.MIDDLE_LEFT,ResizePointTypeEnum.TOP_LEFT,ResizePointTypeEnum.BOTTOM_LEFT].includes(i)&&(this.resizableElement.style.left=o-this.wrapperLeft-E+"px"),i===ResizePointTypeEnum.TOP_RIGHT||i===ResizePointTypeEnum.TOP_LEFT||i===ResizePointTypeEnum.MIDDLE_TOP){var a=parseFloat(window.getComputedStyle(this.resizableElement,null).getPropertyValue("top"))-E+"px";this.resizableElement.style.top=a;}}},t.prototype.calculateToGrowSize=function(e,t,i,n,o,s,l){return e===ResizePointTypeEnum.MIDDLE_TOP?l-i:e===ResizePointTypeEnum.MIDDLE_BOTTOM?i-(l+s):[ResizePointTypeEnum.MIDDLE_LEFT,ResizePointTypeEnum.TOP_LEFT,ResizePointTypeEnum.BOTTOM_LEFT].includes(e)?n-t:t-(n+o)},t.prototype.isMiddleHorizontalPoint=function(e){return e===ResizePointTypeEnum.MIDDLE_LEFT||e===ResizePointTypeEnum.MIDDLE_RIGHT},t.prototype.isMiddleVerticalPoint=function(e){return e===ResizePointTypeEnum.MIDDLE_TOP||e===ResizePointTypeEnum.MIDDLE_BOTTOM},t.prototype.isMiddlePoint=function(e){return this.isMiddleHorizontalPoint(e)||this.isMiddleVerticalPoint(e)},t}(Resizable);

var ResizableFactory=function(){function e(){}return e.make=function(e,t){var r,i,o,l,n,a,f,p;if(t===ResizableType.RESIZABLE_TYPE_IMAGE)return new ResizableImage({contentEl:e,wrapperLeft:null!==(i=null===(r=document.getElementById("wrapper"))||void 0===r?void 0:r.offsetLeft)&&void 0!==i?i:0});if(t===ResizableType.RESIZABLE_TYPE_TEXT)return new ResizableText({contentEl:e,wrapperLeft:null!==(l=null===(o=document.getElementById("wrapper"))||void 0===o?void 0:o.offsetLeft)&&void 0!==l?l:0});if(t===ResizableType.RESIZABLE_TYPE_VIDEO)return new ResizableVideo({contentEl:e,wrapperLeft:null!==(a=null===(n=document.getElementById("wrapper"))||void 0===n?void 0:n.offsetLeft)&&void 0!==a?a:0});if(t===ResizableType.RESIZABLE_TYPE_SVG)return new ResizableSvg({contentEl:e,wrapperLeft:null!==(p=null===(f=document.getElementById("wrapper"))||void 0===f?void 0:f.offsetLeft)&&void 0!==p?p:0});throw new Error("Resizable type: ".concat(t," not found"))},e}();

var Rotate=function(){function t(t,e){this.contentElement=t,this.wrapperElement=e,this.rotation=0,this.mouseCoords={x:0,y:0},this.rotatePoint=document.createElement("div"),this.rotatePoint.classList.add("rotate-point"),this.rotatePoint.innerHTML='<?xml version="1.0" encoding="utf-8"?>\n        <svg width="20px" height="20px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n            <path d="M12.5 20.5C17.1944 20.5 21 16.6944 21 12C21 7.30558 17.1944 3.5 12.5 3.5C7.80558 3.5 4 7.30558 4 12C4 13.5433 4.41128 14.9905 5.13022 16.238M1.5 15L5.13022 16.238M6.82531 12.3832L5.47107 16.3542L5.13022 16.238" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n        </svg>',this.contentElement.appendChild(this.rotatePoint),this.boundStartDragEventHandler=this.startDrag.bind(this),this.initEvents();}return t.prototype.initEvents=function(){this.rotatePoint.addEventListener("mousedown",this.startMoving.bind(this),!1);},t.prototype.startMoving=function(t){var e=this,n=function(){e.contentElement.classList.remove("is-rotating"),e.wrapperElement.removeEventListener("mouseup",n,!1),e.wrapperElement.removeEventListener("mousemove",e.boundStartDragEventHandler,!1);};this.contentElement.classList.add("is-rotating"),this.wrapperElement.addEventListener("mouseup",n,!1),this.wrapperElement.addEventListener("mousemove",this.boundStartDragEventHandler,!1),this.mouseCoords.x=t.clientX,this.mouseCoords.y=t.clientY;},t.prototype.startDrag=function(t){var e=t.clientX,n=t.clientY,o=this.rotatePoint.getBoundingClientRect(),i=n<o.y+o.height/2,s=this.mouseCoords.x!==e?this.mouseCoords.x-e:this.mouseCoords.y-n;i?this.rotation-=s:this.rotation+=s,this.mouseCoords.x=t.clientX,this.mouseCoords.y=t.clientY,this.contentElement.style.transform="rotate(".concat(this.rotation,"deg)");},t}();

var LinkTextForm=function(){function t(t){this.linkBox=t,this.onLinkSubmit=function(t){},this.linkTextForm=document.createElement("form"),this.linkTextForm.classList.add("link-text-form"),this.linkTextForm.innerHTML='\n            <label>Texto</label>\n            <input type="url" name="link" required placeholder="Informe um endereço" />\n            <div style="text-align: right;"><button type="submit">Pronto</button></div>\n        ',this.linkBox.appendChild(this.linkTextForm),this.initEvents();}return t.prototype.initEvents=function(){var t=this;this.linkTextForm.addEventListener("submit",(function(n){n.preventDefault();var e=new FormData(n.target).get("link");e&&(t.onLinkSubmit(e.toString()),t.linkTextForm.reset());}),!1);},t}();

var LinkButton=function(){function t(t){var o,n;this.topToolBoxElement=t,this.onLinkSubmit=function(t){},this.linkButton=document.createElement("button"),this.linkButton.innerHTML='\n        <svg width="20px" height="20px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n            <path d="M9.16488 17.6505C8.92513 17.8743 8.73958 18.0241 8.54996 18.1336C7.62175 18.6695 6.47816 18.6695 5.54996 18.1336C5.20791 17.9361 4.87912 17.6073 4.22153 16.9498C3.56394 16.2922 3.23514 15.9634 3.03767 15.6213C2.50177 14.6931 2.50177 13.5495 3.03767 12.6213C3.23514 12.2793 3.56394 11.9505 4.22153 11.2929L7.04996 8.46448C7.70755 7.80689 8.03634 7.47809 8.37838 7.28062C9.30659 6.74472 10.4502 6.74472 11.3784 7.28061C11.7204 7.47809 12.0492 7.80689 12.7068 8.46448C13.3644 9.12207 13.6932 9.45086 13.8907 9.7929C14.4266 10.7211 14.4266 11.8647 13.8907 12.7929C13.7812 12.9825 13.6314 13.1681 13.4075 13.4078M10.5919 10.5922C10.368 10.8319 10.2182 11.0175 10.1087 11.2071C9.57284 12.1353 9.57284 13.2789 10.1087 14.2071C10.3062 14.5492 10.635 14.878 11.2926 15.5355C11.9502 16.1931 12.279 16.5219 12.621 16.7194C13.5492 17.2553 14.6928 17.2553 15.621 16.7194C15.9631 16.5219 16.2919 16.1931 16.9495 15.5355L19.7779 12.7071C20.4355 12.0495 20.7643 11.7207 20.9617 11.3787C21.4976 10.4505 21.4976 9.30689 20.9617 8.37869C20.7643 8.03665 20.4355 7.70785 19.7779 7.05026C19.1203 6.39267 18.7915 6.06388 18.4495 5.8664C17.5212 5.3305 16.3777 5.3305 15.4495 5.8664C15.2598 5.97588 15.0743 6.12571 14.8345 6.34955" stroke="#000000" stroke-width="2" stroke-linecap="round"/>\n        </svg>\n        ',null===(o=this.topToolBoxElement.querySelector(".top-tool-box-wrapper .top-tool-box-link-wrapper"))||void 0===o||o.appendChild(this.linkButton),this.linkBox=document.createElement("div"),this.linkBox.classList.add("link-box"),this.linkTextForm=new LinkTextForm(this.linkBox),null===(n=this.topToolBoxElement.querySelector(".top-tool-box-wrapper .top-tool-box-link-wrapper"))||void 0===n||n.appendChild(this.linkBox),this.initEvents();}return t.prototype.showButton=function(){this.linkButton.style.display="block";},t.prototype.hideButton=function(){this.linkButton.style.display="none";},t.prototype.hideLinkBox=function(){this.linkBox.classList.remove("active");},t.prototype.initEvents=function(){var t=this;this.linkButton.addEventListener("click",(function(){t.linkBox.classList.contains("active")?t.linkBox.classList.remove("active"):t.linkBox.classList.add("active");})),this.linkTextForm.onLinkSubmit=function(o){t.onLinkSubmit(o),t.hideLinkBox();};},t}();

var RemoveButton=function(){function t(t){var o;this.topToolBoxElement=t,this.onClickRemoveButton=function(){},this.removeButton=document.createElement("button"),this.removeButton.innerHTML='\n        <svg width="20px" height="20px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n            <path d="M10 11V17" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n            <path d="M14 11V17" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n            <path d="M4 7H20" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n            <path d="M6 7H12H18V18C18 19.6569 16.6569 21 15 21H9C7.34315 21 6 19.6569 6 18V7Z" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n            <path d="M9 5C9 3.89543 9.89543 3 11 3H13C14.1046 3 15 3.89543 15 5V7H9V5Z" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n        </svg>\n        ',null===(o=this.topToolBoxElement.querySelector(".top-tool-box-wrapper"))||void 0===o||o.appendChild(this.removeButton),this.initEvents();}return t.prototype.showButton=function(){this.removeButton.style.display="block";},t.prototype.hideButton=function(){this.removeButton.style.display="none";},t.prototype.initEvents=function(){var t=this;this.removeButton.addEventListener("click",(function(){t.onClickRemoveButton();}));},t}();

var RemoveLinkButton=function(){function t(t){var n;this.topToolBoxElement=t,this.onLinkRemove=function(){},this.removeLinkButton=document.createElement("button"),this.removeLinkButton.innerHTML='\n        <?xml version="1.0" encoding="utf-8"?>\n        <svg width="20px" height="20px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n            <path d="M7 7C4.23858 7 2 9.23858 2 12C2 14.7614 4.23858 17 7 17H9C11.1636 17 13.0062 15.6258 13.7026 13.7026M17 17H16.5M10 12C10 11.4021 10.1049 10.8288 10.2974 10.2974M21 21L13.7026 13.7026M3 3L10.2974 10.2974M10.2974 10.2974L13.7026 13.7026M13.0464 7.39604C13.6466 7.14106 14.3068 7 15 7H17C19.7614 7 22 9.23858 22 12C22 13.2151 21.5665 14.329 20.8458 15.1954" stroke="#000000" stroke-width="2" stroke-linecap="round"/>\n        </svg>\n        ',this.removeLinkButton.style.display="none",null===(n=this.topToolBoxElement.querySelector(".top-tool-box-wrapper .top-tool-box-link-wrapper"))||void 0===n||n.appendChild(this.removeLinkButton),this.initEvents();}return t.prototype.showButton=function(){this.removeLinkButton.style.display="block";},t.prototype.hideButton=function(){this.removeLinkButton.style.display="none";},t.prototype.initEvents=function(){var t=this;this.removeLinkButton.addEventListener("click",(function(){t.onLinkRemove();}));},t}();

var TopToolBoxElement=function(){function t(t){var o=this;this.contentElement=t,this.onLinkSubmit=function(t){},this.onLinkRemove=function(){},this.onClickRemoveButton=function(){},this.topToolBoxElement=document.createElement("div"),this.topToolBoxElement.classList.add("top-toolbox"),this.topToolBoxElement.innerHTML='\n            <div class="top-tool-box-wrapper">\n                <div class="top-tool-box-link-wrapper"></div>\n            </div>\n        ',this.linkButton=new LinkButton(this.topToolBoxElement),this.linkButton.onLinkSubmit=function(t){o.onLinkSubmit(t);},this.removeLinkButton=new RemoveLinkButton(this.topToolBoxElement),this.removeLinkButton.onLinkRemove=function(){o.onLinkRemove();},this.removeButton=new RemoveButton(this.topToolBoxElement),this.removeButton.onClickRemoveButton=function(){o.onClickRemoveButton();},this.contentElement.appendChild(this.topToolBoxElement);}return t.prototype.setEnableAddLink=function(t){void 0===t&&(t=!0),t?(this.linkButton.showButton(),this.removeLinkButton.hideButton()):(this.linkButton.hideButton(),this.removeLinkButton.showButton());},t.prototype.show=function(){var t=this;setTimeout((function(){t.topToolBoxElement.classList.add("active");}),100);},t.prototype.hide=function(){this.topToolBoxElement.classList.remove("active"),this.linkButton.hideLinkBox();},t}();

var PlayVideoButton=function(){function t(t){this.topToolBoxElement=t,this.onClickPlayVideoButton=function(){},this.playVideoButton=document.createElement("button"),this.playVideoButton.innerHTML='\n        <svg width="20px" height="20px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n            <path d="M16.6582 9.28638C18.098 10.1862 18.8178 10.6361 19.0647 11.2122C19.2803 11.7152 19.2803 12.2847 19.0647 12.7878C18.8178 13.3638 18.098 13.8137 16.6582 14.7136L9.896 18.94C8.29805 19.9387 7.49907 20.4381 6.83973 20.385C6.26501 20.3388 5.73818 20.0469 5.3944 19.584C5 19.053 5 18.1108 5 16.2264V7.77357C5 5.88919 5 4.94701 5.3944 4.41598C5.73818 3.9531 6.26501 3.66111 6.83973 3.6149C7.49907 3.5619 8.29805 4.06126 9.896 5.05998L16.6582 9.28638Z" stroke="#000000" stroke-width="2" stroke-linejoin="round"/>\n        </svg>\n        ';var o=this.topToolBoxElement.querySelector(".top-tool-box-wrapper");o&&(o.insertBefore(this.playVideoButton,o.childNodes[1]),this.initEvents());}return t.prototype.showButton=function(){this.playVideoButton.style.display="block";},t.prototype.hideButton=function(){this.playVideoButton.style.display="none";},t.prototype.initEvents=function(){var t=this;this.playVideoButton.addEventListener("click",(function(){t.onClickPlayVideoButton();}));},t}();

var TopToolBoxVideoElement=function(o){function t(t){var e=o.call(this,t)||this;return e.contentElement=t,e.onClickPlayVideoButton=function(){},new PlayVideoButton(e.topToolBoxElement).onClickPlayVideoButton=function(){e.onClickPlayVideoButton();},e}return __extends(t,o),t}(TopToolBoxElement);

var ElementManipulable=function(){function t(t,e,n,o,i,r){var s;this.contentEl=t,this.wrapperElement=e,this.isResizable=n,this.isDragabble=o,this.countElement=i,this.type=r,this.wrapperBounds={w:0,h:0,x:0,y:0},this.onStartResize=function(){},this.onStopResize=function(){},this.onElementSelect=function(t){},this.onRightClick=function(t){},this.onDeleted=function(){},this.resizableElement=null,this.contentEl.setAttribute("contenteditable","false");var l=null!==(s=this.contentEl.getAttribute("style"))&&void 0!==s?s:"";this.contentEl.removeAttribute("style"),this.contentWrapper=document.createElement("div"),this.contentWrapper.classList.add("content-wrapper"),this.contentWrapper.setAttribute("style",l),this.contentWrapper.style.zIndex="".concat(this.countElement),this.contentWrapper.appendChild(this.contentEl),this.wrapperElement.appendChild(this.contentWrapper),r===ResizableType.RESIZABLE_TYPE_VIDEO?this.topToolBoxElement=new TopToolBoxVideoElement(this.contentWrapper):this.topToolBoxElement=new TopToolBoxElement(this.contentWrapper),this.id=String((new Date).getTime());var p=this.wrapperElement.getBoundingClientRect(),a=p.x,h=p.y,c=p.width,m=p.height;this.wrapperBounds.h=m,this.wrapperBounds.w=c,this.wrapperBounds.x=a,this.wrapperBounds.y=h,this.configureElements(),this.initEvents();}return t.prototype.configureElements=function(){var t=this;this.isDragabble&&new Drag(this.contentWrapper,this.wrapperBounds,this.wrapperElement),this.isResizable&&(this.resizableElement=ResizableFactory.make(this.contentEl,this.type),this.resizableElement.onStartResize=function(){t.onStartResize();},this.resizableElement.onStopResize=function(){t.onStopResize();}),new Rotate(this.contentWrapper,this.wrapperElement),this.setCenterPosition();},t.prototype.initEvents=function(){var t=this;this.contentWrapper.addEventListener("dragstart",(function(t){t.preventDefault();})),this.contentWrapper.addEventListener("click",this.handleSelectedElement.bind(this),!1),this.topToolBoxElement.onClickRemoveButton=function(){t.deleteElement();},this.topToolBoxElement.onLinkSubmit=function(e){t.hasAnySelectionInText()||t.createLinkWrapperElement(e);},this.topToolBoxElement.onLinkRemove=function(){t.hasAnySelectionInText()||t.removeLinkWrapperElement();},this.contentWrapper.addEventListener("contextmenu",this.handleContextMenu.bind(this),!1);},t.prototype.handleSelectedElement=function(){var t;if(this.onElementSelect(this.id),!this.hasAnySelectionInText()){var e="A"===(null===(t=this.contentEl.parentElement)||void 0===t?void 0:t.nodeName);this.topToolBoxElement.setEnableAddLink(!e);}this.topToolBoxElement.show();},t.prototype.handleContextMenu=function(t){t.preventDefault(),this.onRightClick(t);},t.prototype.removeLinkWrapperElement=function(){var t;null===(t=this.contentEl.parentElement)||void 0===t||t.remove(),this.contentWrapper.appendChild(this.contentEl);},t.prototype.createLinkWrapperElement=function(t){var e=document.createElement("a");e.href=t,this.contentWrapper.replaceChild(e,this.contentEl),e.appendChild(this.contentEl),this.topToolBoxElement.setEnableAddLink(!1);},t.prototype.deleteElement=function(){confirm("Você tem certeza que deseja remove este elemento?")&&(this.onDeleted(),this.contentWrapper.remove());},t.prototype.removeSelection=function(){var t;this.contentWrapper.classList.remove("is-editing"),this.contentEl.setAttribute("contenteditable","false"),null===(t=this.resizableElement)||void 0===t||t.removeSelection(),this.topToolBoxElement.hide();},t.prototype.getElement=function(){return this.contentEl},t.prototype.getId=function(){return this.id},t.prototype.getType=function(){return this.type},t.prototype.getCountPosition=function(){return this.countElement},t.prototype.setCountPosition=function(t){this.countElement=t,this.contentWrapper.style.zIndex="".concat(this.countElement);},t.prototype.isElementDragabble=function(){return this.isDragabble},t.prototype.isElementResizable=function(){return this.isResizable},t}();

var ImageElementManipulable=function(t){function e(e,n,o,i,l){var a=t.call(this,e,n,o,i,l,ResizableType.RESIZABLE_TYPE_IMAGE)||this;return a.contentEl=e,a.wrapperElement=n,a}return __extends(e,t),e.prototype.setCenterPosition=function(){this.contentEl.onload=this.onLoadImageContent.bind(this);},e.prototype.hasAnySelectionInText=function(){return !1},e.prototype.onLoadImageContent=function(){var t=this.contentWrapper.getBoundingClientRect(),e=t.height,n=t.width;this.contentWrapper.style.left="calc(50% - ".concat(n/2,"px)"),this.contentWrapper.style.top="calc(50% - ".concat(e/2,"px)");var o=this.contentEl.getBoundingClientRect(),i=o.width,l=o.height;this.contentEl.style.width="".concat(i,"px"),this.contentEl.style.height="".concat(l,"px");},e.prototype.getElementClear=function(){var t=this.contentEl.cloneNode();return t.removeAttribute("style"),t.removeAttribute("class"),t},e}(ElementManipulable);

var SvgElementManipulable=function(t){function e(e,n,o,l,r){var i=t.call(this,e,n,o,l,r,ResizableType.RESIZABLE_TYPE_SVG)||this;return i.contentEl=e,i.wrapperElement=n,i}return __extends(e,t),e.prototype.setCenterPosition=function(){this.onLoadContent();},e.prototype.hasAnySelectionInText=function(){return !1},e.prototype.onLoadContent=function(){var t=this.contentWrapper.getBoundingClientRect(),e=t.height,n=t.width;this.contentWrapper.style.left="calc(50% - ".concat(n/2,"px)"),this.contentWrapper.style.top="calc(50% - ".concat(e/2,"px)"),this.contentEl.style.width="100px";},e.prototype.getElementClear=function(){var t=this.contentEl.cloneNode(!0);return t.removeAttribute("style"),t.removeAttribute("class"),t},e}(ElementManipulable);

var StyleConfigEnum;!function(i){i.BOLD="bold",i.COLOR="color",i.ITALIC="italic",i.STRIKE_THROUGH="strikeThrough",i.SUPERSCRIPT="superscript",i.SUBSCRIPT="subscript",i.UNDERLINE="underline";}(StyleConfigEnum||(StyleConfigEnum={}));

var DomUtils=function(){function e(){}return e.prototype.getDeepestNodes=function(e,t){var n=[],o=[];if(!e.collapsed){for(var r=e.startContainer,d=e.endContainer,i=document.createTreeWalker(e.commonAncestorContainer,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT,null),a=i.currentNode=r;a;){if(a.nodeType===Node.TEXT_NODE&&a.textContent&&a.textContent.trim().length>0&&e.intersectsNode(a)){var l=a.parentElement;l&&this.isStyledTextNode(l)?o.includes(l)||o.push(l):e.intersectsNode(a)&&n.push(a);}if(a===d)break;a=i.nextNode();}for(var s=0,p=n;s<p.length;s++){var u=p[s];(c=this.createSpanIfNeeded(u,e,t))&&!o.includes(c)&&o.push(c);}}if(1===o.length){u=o[0];if(!this.hasStyledTextNode(u)){var c=document.createElement(t);e.surroundContents(c),o=[c];}}return o},e.prototype.hasStyledTextNode=function(e){return e.nodeType===Node.ELEMENT_NODE&&e.style.length>0},e.prototype.getSelectedRoot=function(e,t,n){var o;void 0===n&&(n="span");var r=[];if(e.collapsed){if(t){var d=document.createElement(n);if(t&&t.tagName===n.toUpperCase())d=t;else {var i=t.parentNode;i&&i.tagName===n?d=t.parentNode:(d.textContent=" ​",t.nodeType===Node.TEXT_NODE?null===(o=t.parentNode)||void 0===o||o.insertBefore(d,t.nextSibling):t.nodeType===Node.ELEMENT_NODE&&t.appendChild(d));}r=[d];for(var a=e.endContainer.nextSibling;a&&a.nodeType!==Node.TEXT_NODE;)a=a.nextSibling;e.setStart(d,1),e.setEnd(d,1);var l=window.getSelection();l&&l.rangeCount>0&&l.removeAllRanges(),null==l||l.addRange(e);}}else r=this.getDeepestNodes(e,n);return r},e.prototype.createSpanIfNeeded=function(e,t,n){if(e.nodeType!==Node.TEXT_NODE||!e.textContent)return null;var o=e.textContent,r=e===t.startContainer?t.startOffset:0,d=e===t.endContainer?t.endOffset:o.length;if(0===d||r===o.length||r===d)return null;var i=document.createElement(n);return i.textContent=o.substring(r,d),this.replaceNodeWithSpan(e,i,r,d),i},e.prototype.replaceNodeWithSpan=function(e,t,n,o){var r=e.textContent,d=e.parentNode;if(d&&r){var i=document.createTextNode(r.substring(0,n)),a=document.createTextNode(r.substring(o));d.insertBefore(i,e),d.insertBefore(t,e),d.insertBefore(a,e),d.removeChild(e);}},e.prototype.isStyledTextNode=function(e){return !!e&&!e.classList.contains("on-codemerge")},e.prototype.isStyleApplied=function(e,t,n){return n(e,t)},e.prototype.applyStyleToDeepestNodes=function(e,t,n,o){var r,d=document.createDocumentFragment();n(e,t,o),null===(r=null==e?void 0:e.parentNode)||void 0===r||r.insertBefore(d,e);},e.prototype.applyAnchorToDeepestNodes=function(e,t){var n,o=document.createDocumentFragment();e.setAttribute("href",t),null===(n=null==e?void 0:e.parentNode)||void 0===n||n.insertBefore(o,e);},e.prototype.removeAnchorFromDeepestNodes=function(e){var t;if(e.nodeType===Node.ELEMENT_NODE){for(var n=e,o=document.createDocumentFragment();n.firstChild;)o.appendChild(n.firstChild);null===(t=n.parentNode)||void 0===t||t.replaceChild(o,n);}},e.prototype.removeStyleFromDeepestNodes=function(e,t,n){var o;if(e.nodeType===Node.ELEMENT_NODE){var r=e;if(this.isStyledTextNode(r)&&(n(r,t),!r.getAttribute("style")&&"SPAN"===r.tagName)){for(var d=document.createDocumentFragment();r.firstChild;)d.appendChild(r.firstChild);null===(o=r.parentNode)||void 0===o||o.replaceChild(d,r);}}},e}();

var _a;var styleConfigConstant=(_a={},_a[StyleConfigEnum.BOLD]={name:"Bold",property:"fontWeight",enabledValue:"bold",isComplex:!1},_a[StyleConfigEnum.ITALIC]={name:"Italic",property:"fontStyle",enabledValue:"italic",isComplex:!1},_a[StyleConfigEnum.UNDERLINE]={name:"Underline",property:"textDecoration",enabledValue:"underline",isComplex:!0},_a[StyleConfigEnum.STRIKE_THROUGH]={name:"Strike Through",property:"textDecoration",enabledValue:"line-through",isComplex:!0},_a[StyleConfigEnum.SUPERSCRIPT]={name:"Superscript",property:"verticalAlign",enabledValue:"super",isComplex:!1},_a[StyleConfigEnum.SUBSCRIPT]={name:"Subscript",property:"verticalAlign",enabledValue:"sub",isComplex:!1},_a[StyleConfigEnum.COLOR]={name:"Color",property:"color",enabledValue:"#000000",isComplex:!1},_a);

var StyleManager=function(){function t(){}return t.prototype.set=function(t,e,o){var n=styleConfigConstant[e];if(n){var r=null!=o?o:n.enabledValue;n.isComplex?this.setComplexStyle(t,n.property,r):t.style[n.property]=r;}},t.prototype.remove=function(t,e){var o=styleConfigConstant[e];o&&(o.isComplex?this.removeComplexStyle(t,o.property,o.enabledValue):t.style[o.property]=null);},t.prototype.has=function(t,e){var o=styleConfigConstant[e];if(!o)return !1;var n=t.style[o.property];return ""!==n||n===o.enabledValue},t.prototype.setComplexStyle=function(t,e,o){var n,r=null===(n=t.style[e])||void 0===n?void 0:n.toString().split(" ");r&&!r.includes(o)&&(r.push(o),t.style[e]=r.join(" ").trim());},t.prototype.removeComplexStyle=function(t,e,o){var n,r=null===(n=t.style[e])||void 0===n?void 0:n.toString().split(" ").filter((function(t){return t!==o}));r&&(t.style[e]=r.join(" ").trim());},t}();

var TextElementManipulable=function(e){function t(t,n,o,l,i){var p=e.call(this,t,n,o,l,i,ResizableType.RESIZABLE_TYPE_TEXT)||this;return p.contentEl=t,p.wrapperElement=n,p.domUtils=new DomUtils,p.styleManager=new StyleManager,p.initEventsText(),p}return __extends(t,e),t.prototype.initEventsText=function(){var e=this;this.onDblClick(),this.onSelectText(),this.topToolBoxElement.onLinkSubmit=function(t){e.hasAnySelectionInText()?e.applyLinkInTextSelected(t):e.createLinkWrapperElement(t);},this.topToolBoxElement.onLinkRemove=function(){e.tempAnchorToRemove?e.removeLinkInTextSelected(e.tempAnchorToRemove):e.removeLinkWrapperElement();},document.addEventListener("click",(function(t){t.target.closest(".top-toolbox")||e.topToolBoxElement.hide();})),this.contentEl.addEventListener("click",(function(t){"A"===t.target.tagName&&(e.tempAnchorToRemove=t.target,e.topToolBoxElement.setEnableAddLink(!1),e.topToolBoxElement.show());}));},t.prototype.onDblClick=function(){var e=this;this.contentWrapper.addEventListener("dblclick",(function(t){t.target.classList.contains("shadow")&&(t.target.style.display="none"),e.contentWrapper.classList.add("is-editing"),e.contentEl.setAttribute("contenteditable","true");}),!1);},t.prototype.onSelectText=function(){var e=this;this.contentEl.addEventListener("mouseup",(function(t){var n=window.getSelection();n&&n.toString().trim().length>0&&(e.tempSelectionProps={range:n.getRangeAt(0),currentNode:n.anchorNode},e.topToolBoxElement.setEnableAddLink(),e.topToolBoxElement.show());}),!1);},t.prototype.setCenterPosition=function(){var e=this.contentWrapper.getBoundingClientRect(),t=e.height,n=e.width;this.contentWrapper.style.left="calc(50% - ".concat(n/2,"px)"),this.contentWrapper.style.top="calc(50% - ".concat(t/2,"px)");},t.prototype.setTextFont=function(e){this.contentEl.style.fontFamily=e;},t.prototype.setFontSize=function(e){this.contentWrapper.style.fontSize="".concat(e,"px");},t.prototype.toggleBoldInSelection=function(){this.appplyStyleInTextSelected(StyleConfigEnum.BOLD);},t.prototype.setColorInSelection=function(e){this.appplyStyleInTextSelected(StyleConfigEnum.COLOR,e);},t.prototype.toggleItalicInSelection=function(){this.appplyStyleInTextSelected(StyleConfigEnum.ITALIC);},t.prototype.toggleStrikeThroughInSelection=function(){this.appplyStyleInTextSelected(StyleConfigEnum.STRIKE_THROUGH);},t.prototype.toggleSuperscriptInSelection=function(){this.appplyStyleInTextSelected(StyleConfigEnum.SUPERSCRIPT);},t.prototype.toggleSubscriptInSelection=function(){this.appplyStyleInTextSelected(StyleConfigEnum.SUBSCRIPT);},t.prototype.toggleUnderlineInSelection=function(){this.appplyStyleInTextSelected(StyleConfigEnum.UNDERLINE);},t.prototype.hasAnySelectionInText=function(){return void 0!==this.tempSelectionProps},t.prototype.applyLinkInTextSelected=function(e){var t,n=this;this.tempSelectionProps&&(null!==(t=this.domUtils.getSelectedRoot(this.tempSelectionProps.range,this.tempSelectionProps.currentNode,"a"))&&void 0!==t?t:[]).forEach((function(t){n.domUtils.applyAnchorToDeepestNodes(t,e);}));},t.prototype.removeLinkInTextSelected=function(e){this.domUtils.removeAnchorFromDeepestNodes(e);},t.prototype.appplyStyleInTextSelected=function(e,t){var n,o=this,l=window.getSelection();l&&(null!==(n=this.domUtils.getSelectedRoot(l.getRangeAt(0),l.anchorNode))&&void 0!==n?n:[]).forEach((function(n){o.domUtils.isStyleApplied(n,e,o.styleManager.has.bind(o.styleManager))?o.domUtils.removeStyleFromDeepestNodes(n,e,o.styleManager.remove.bind(o.styleManager)):o.domUtils.applyStyleToDeepestNodes(n,e,o.styleManager.set.bind(o.styleManager),t);}));},t.prototype.getElementClear=function(){var e=this.contentEl.cloneNode(!0);return e.removeAttribute("style"),e.removeAttribute("class"),e.removeAttribute("contenteditable"),e},t}(ElementManipulable);

var FloatingVideo=function(){function e(e,t){void 0===t&&(t=""),this.videoUrl=e,this.posterUrl=t,this.floatingVideoWrapper=document.createElement("div"),this.floatingVideoWrapper.classList.add("floating-video-wrapper"),this.videoElement=document.createElement("video"),this.videoElement.poster=this.posterUrl,this.videoElement.controls=!0;var i=document.createElement("source");i.src=this.videoUrl,this.videoElement.appendChild(i),this.floatingVideoWrapper.appendChild(this.videoElement),document.body.appendChild(this.floatingVideoWrapper),this.initEvents();}return e.prototype.initEvents=function(){var e=this;this.floatingVideoWrapper.addEventListener("click",(function(t){e.videoElement.pause(),e.videoElement.currentTime=0,e.floatingVideoWrapper.classList.remove("show");}),!1);},e.prototype.show=function(){this.floatingVideoWrapper.classList.add("show");},e}();

var VideoElementManipulable=function(t){function e(e,n,o,i,l){var r=t.call(this,e,n,o,i,l,ResizableType.RESIZABLE_TYPE_VIDEO)||this;return r.contentEl=e,r.wrapperElement=n,r.floatingVideo=new FloatingVideo(e.firstElementChild.src,e.poster),r.initVideoEvents(),r}return __extends(e,t),e.prototype.initVideoEvents=function(){var t=this;this.topToolBoxElement.onClickPlayVideoButton=function(){t.floatingVideo.show();};},e.prototype.setCenterPosition=function(){var t=this;setTimeout((function(){t.onLoadVideoContent();}),100);},e.prototype.hasAnySelectionInText=function(){return !1},e.prototype.onLoadVideoContent=function(){var t=this.contentWrapper.getBoundingClientRect(),e=t.height,n=t.width;this.contentWrapper.style.left="calc(50% - ".concat(n/2,"px)"),this.contentWrapper.style.top="calc(50% - ".concat(e/2,"px)");},e.prototype.getElementClear=function(){var t=this.contentEl.cloneNode(!0);return t.removeAttribute("style"),t.removeAttribute("class"),t},e}(ElementManipulable);

var WrapperTypeEventEnum;!function(e){e.ELEMENTS_ORDER_CHANGE="elements:order:change",e.ELEMENT_ON_DELETED="element:on:deleted";}(WrapperTypeEventEnum||(WrapperTypeEventEnum={}));var Wrapper=function(){function e(e){var t=e.el;this.countElement=1,this.onEvents={},this.onElementSelect=function(e){},this.onNoneElementSelect=function(){},this.wrapperElement=t,this.isResizing=!1,this.elements=new Map,this.contextMenu=new ContextMenu,this.wrapperElement.style.position="relative",this.initEvents();}return e.prototype.addElement=function(e){var t=this.makeElement(e);this.addElementManipulate(t),this.countElement++;},e.prototype.makeElement=function(e){var t=e.contentEl,n=e.isResizable,i=void 0!==n&&n,o=e.isDragabble,r=void 0!==o&&o;if("IMG"===t.nodeName)return new ImageElementManipulable(t,this.wrapperElement,i,r,this.countElement);if("DIV"===t.nodeName)return new TextElementManipulable(t,this.wrapperElement,i,r,this.countElement);if("VIDEO"===t.nodeName)return new VideoElementManipulable(t,this.wrapperElement,i,r,this.countElement);if("SVG"===t.nodeName)return new SvgElementManipulable(t,this.wrapperElement,i,r,this.countElement);throw new Error("".concat(t.nodeName," not implemented."))},e.prototype.addElementManipulate=function(e){var t=this;e.onStartResize=function(){t.isResizing=!0;},e.onStopResize=function(){setTimeout((function(){t.isResizing=!1;}),100);},e.onElementSelect=function(e){var n=t.elements.get(e);if(!n)throw new Error("Element with id: ".concat(e," not found."));t.elements.forEach((function(t){t.getId()!==e&&t.removeSelection();})),t.onElementSelect(n);},e.onRightClick=function(n){t.contextMenu.enableAllItemMenu(),t.disableContextMenuItemsByElement(e),t.contextMenu.show(n.clientY,n.clientX),t.contextMenu.onClickItemMenu=function(n){if(n===ItemMenu.DELETE)e.deleteElement();else if(n===ItemMenu.DUPLICATE)t.addElement({contentEl:e.getElementClear(),isDragabble:e.isElementDragabble(),isResizable:e.isElementResizable()});else if(n===ItemMenu.SEND_BOTTOM||n===ItemMenu.SEND_TOP)t.sendElementTopOrBottom(e,n);else if(n===ItemMenu.SEND_ALL_BOTTOM)for(var i=(o=t.getElementsPositionsOrdered()).findIndex((function(t){return t.id===e.getId()}));i>0;){t.sendElementTopOrBottom(e,ItemMenu.SEND_BOTTOM),i=t.getElementsPositionsOrdered().findIndex((function(t){return t.id===e.getId()}));}else if(n===ItemMenu.SEND_ALL_TOP){var o;for(i=(o=t.getElementsPositionsOrdered()).findIndex((function(t){return t.id===e.getId()}));i<o.length-1;){t.sendElementTopOrBottom(e,ItemMenu.SEND_TOP),i=t.getElementsPositionsOrdered().findIndex((function(t){return t.id===e.getId()}));}}t.send(WrapperTypeEventEnum.ELEMENTS_ORDER_CHANGE,e);};},e.onDeleted=function(){t.elements.delete(e.getId()),t.send(WrapperTypeEventEnum.ELEMENT_ON_DELETED,e.getId());};var n=e.getId();this.elements.set(n,e);},e.prototype.initEvents=function(){this.wrapperElement.addEventListener("click",this.handleClick.bind(this),!0);},e.prototype.handleClick=function(e){this.isResizing||e.target===this.wrapperElement&&(this.elements.forEach((function(e){e.removeSelection();})),this.onNoneElementSelect());},e.prototype.sendElementTopOrBottom=function(e,t){var n=this.getNextPosition(e,t);if(void 0!==n){var i=this.elements.get(n.id);if(i){var o=i.getCountPosition();i.setCountPosition(e.getCountPosition()),e.setCountPosition(o);}}},e.prototype.getNextPosition=function(e,t){var n=this.getElementsPositionsOrdered(),i=n.findIndex((function(t){return t.id===e.getId()}));if(-1!==i){var o=n[t===ItemMenu.SEND_BOTTOM?i-1:i+1];if(void 0!==o)return o}},e.prototype.disableContextMenuItemsByElement=function(e){var t=this.getElementsPositionsOrdered(),n=t.findIndex((function(t){return t.id===e.getId()}));-1!==n&&(void 0===t[n+1]&&(this.contextMenu.disableItemMenu(ItemMenu.SEND_TOP),this.contextMenu.disableItemMenu(ItemMenu.SEND_ALL_TOP)),void 0===t[n-1]&&(this.contextMenu.disableItemMenu(ItemMenu.SEND_BOTTOM),this.contextMenu.disableItemMenu(ItemMenu.SEND_ALL_BOTTOM)));},e.prototype.getElementsPositionsOrdered=function(){var e=[];return this.elements.forEach((function(t){e.push({position:t.getCountPosition(),id:t.getId()});})),e.sort((function(e,t){return e.position-t.position}))},e.prototype.getElementsLayer=function(){var e=this;return this.getElementsPositionsOrdered().map((function(t){return __assign(__assign({},t),{element:e.elements.get(t.id)})}))},e.prototype.setPositionElement=function(e,t){var n=this.getElementsPositionsOrdered(),i=n.find((function(t){return t.id===e}));if(!i)throw new Error("Cannot find ".concat(t," position in collection"));if(t<=0||t>n.length)throw new Error("Position ".concat(t," invalid. Must be between 0 and ").concat(n.length,"!"));var o=this.elements.get(e);if(!o)throw new Error("Cannot find ".concat(e," in collection"));var r=i.position;if(t<r)for(;t<r;){this.sendElementTopOrBottom(o,ItemMenu.SEND_BOTTOM);var s=this.getElementsPositionsOrdered().find((function(t){return t.id===e}));if(!s)throw new Error("Cannot find ".concat(t," position in collection to new position: ").concat(t));r=s.position;}else if(t>r)for(;t>r;){this.sendElementTopOrBottom(o,ItemMenu.SEND_TOP);var l=this.getElementsPositionsOrdered().find((function(t){return t.id===e}));if(!l)throw new Error("Cannot find ".concat(t," position in collection to new position: ").concat(t));r=l.position;}},e.prototype.on=function(e,t){Object.values(WrapperTypeEventEnum).includes(e)&&(this.onEvents[e]=t);},e.prototype.send=function(e){for(var t,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];Object.values(WrapperTypeEventEnum).includes(e)&&(t=this.onEvents)[e].apply(t,n);},e}();

export { Wrapper };
